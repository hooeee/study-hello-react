---
title: Part 2 : 쇼핑몰 프로젝트-2
date: 2022-12-16 01:16:00 +0900
category: React
draft: true
---

## 2022-12-16-Part-2--쇼핑몰-프로젝트-2

## 목차

## 01.Lifecycle과 useEffect 1

- 라이프사이클, 컴포넌트도 사람처럼 살고 죽는다는것

  - Detail컴포넌트 보이는 순간 마운트 
  - 컴포넌트에서 스태이트 변경시 업데이트
  - 홈으로 돌아갔을때 사라지는것 언마운트
    - 이런 과정을 가진다.
    - 이거 알아서 뭐하나?

- 라이프사이클 배우는 이유

  - 중간중간 간섭할 수 있음,
  - 그냥 코드실행임

- 특정 시점에서 어떤 특정코드를 실행하기 위해서 배우는 것

  - 갈고리를 달아서 코드를 거는 형식이라고 생각하자

- Detail

  ```react
  class Detail extends React.Compoent{
      ComponentDidMount(){
          
      }
      ComponentDidUpDate(){
          
      }
      ComponentWillUnmount(){
          
      }
  }
  ```

  - 예전스타일

- 최신 스타일

  ```react
  //mount, update
  function Detail(props){
      useEffect(()=>{
          console.log('안녕');
      })
  }
  ```

  - 두번 출력이되는데 그이유 디버깅 위해서 두번 동작하는 것
    -  두번 출력되는 것 없애기 위해서는
      - index.js파일가서 <React.StrictMode>를 없애야함

- 소스코드

  ```react
  import {useEffect, useState} from "react";
  function Detail(props){
      useEffect{()={
          console.log("HI")
      }}
  	let [count, setCount] = useState(0);
  	
  <button onClick={()=>{setCount(count+1)}}>버튼</button>
  ...
  }
  ```

  - 콘솔 밖에 써도 똑같이 구현되는거 아닌가?
    - 그럼 왜 필요하나?
    - 언제쓸까?

### 01.1 useEffect 쓰는 이유

- 실행시점이 다름

  - 그냥 실행이되는 것이 아니고
    - 랜더링이 다되고 나서 실행이 됨

  ```react
  for(var i=0; i<10000;i++){
      console.log(1);
  }
  ```

  - 디테일 필요했을때, 그냥쓰면 반복문 실행 후 html이 그려지게 된다.
    - 이런것을 useEffect안에 쓰면 html 다그려지고 실행되서 효율적으로 사용할 수 있음
    - 그렇게 해서 사용자에게 빠르다는 느낌도 줄 수 있음
  - 쓰는 곳
    - 연산이 오래걸리는것이나
    - 서버에서 데이터 가져오는 작업
    - 타이머 장착

- Effect라는 이름쓰는 이유

  - side effect
    - 함수의 핵심기능과 상관없는 부가기능
      - 이런것에 차용해서 만든 이름이라서 그것과 비슷해서 이름 만든것

### 01.2 숙제

```react

setTimeOut(()=>{실행할 코드},1000)//타이머주는법 활용

<div className="alert alert-warnig">2초이내 구매시 할인</div>
```

- 내가 해결해본 소스

  ```react
  const [hidden, setHidden] = useState(true);
  const onHidden = (() => {
      setHidden(false);
  })
  
  useEffect(() => {
      setTimeout(() => {
          onHidden()
      }, 2000);
  })
  
  {
      hidden == true ? <div className="alert alert-warnig">2초이내 구매시 할인</div> : null
  }
  ```

  - css

    ```css
    .alert{
     font-size : 2em;
     color: white;
    }
    .alert-warnig{
    background: yellow;
    }
    ```

![image-20221219210451142](../../assets/img/post/2022-12-16-Part-2--쇼핑몰-프로젝트-2/image-20221219210451142.png)

## 02.Lifecycle과 useEffect 2

- [] 디팬던시 같은것임

  - 좀더 정확히 쓰는법

    ```react
    const [hidden, setHidden] = useState(true);
    const onHidden = (() => {
        setHidden(false);
    })
    
    useEffect(() => {
        setTimeout(() => {
            onHidden()
        }, 2000);
    },[hidden])
    
    {
        hidden == true ? <div className="alert alert-warnig">2초이내 구매시 할인</div> : null
    }
    ```

    - hidden이 달라질때마다 실행함

- 다른 형식

  ```re
  useEffect(() => {
      setTimeout(() => {
          onHidden()
      }, 2000);
  },[])
  ```

  - 이렇게 하면 딱 한번 실행 하고 싶다면 위와 같이 하면됨	
    - 딱한번만 마운트하고 싶을때

- 추가문법

  - return을 추가 할 수 있음

    ```react
    useEffect(() => {
        setTimeout(() => {
            onHidden()
        }, 2000)
        return () => {
            //코드
        }
    },[])
    ```

    - useEffect실행되기전만 됨	

      - 이런것을 클린업펑션이라고 함

        - 주변을 치우고 해야 더 잘되는 것 처럼
        - 타이머 만들때 useEffect안에 만들면 재랜더링이 매번되기 때문에 어떤 경우는 100개 1000개 될 수 도 있어서
          - return안에 기존 타이머를 제거해주라는 명령을 넣는 경우 사용할 수 있음
          - 기존 코드 지우는 역할로 많이 사용함

      - 타이머 제거

        ```react
        useEffect(() => {
           let a = setTimeout(() => {
                onHidden()
            }, 2000)
            return () => {
               clearTimeout(a)
            }
        },[])
        ```

        - 좀더 안전한 코드
        - clean up function의 경우  mount시 실행안되고
        - unmount시 실행된다.
          - 다른 페이지 넘어가는것이 unmount라고 생각하면됨

### 02.1 빡통식 정리

```react
useEffect(()=>{}) /* 1.재렌더링마다 코드 실행하고 싶으면*/

useEffect(()=>{}, []) /* 2.mount시 1회 코드 실행하고 싶으면*/

useEffect(()=>{ /* 3.unmount시 1회 코드 실행하고 싶으면*/
	return () => {
    }
},[])

/* 4.useEffect 실행 전에 뭔가 실행하려면 언제나 return ()=>{}*/
/* 5.특정 state 변경시에만 실행하려면 [state명] [hidden] */
```

### 02.2 숙제

- <input>에 숫자말고 다른거 입력하면 그러지 말라고 안내메세지 띄우기

  ![image-20221219192951156](../../assets/img/post/2022-12-16-Part-2--쇼핑몰-프로젝트-2/image-20221219192951156.png)

- 내가 해결한 소스코드

  ```react
  const [view, setView] = useState(false);
  const [inputValue, setInputValue] = useState('');
  const onInputValueHandler = (inputValue) => {
      if (isNaN(inputValue)) {
          //alert("숫자만 입력하세요");
          setView(true);
      }
      else {
          setView(false);
          setInputValue(inputValue);
          console.log(inputValue);
      }
  }
  
  const onHidden = (() => {
      setHidden(false);
  })
  
  useEffect(() => {
      setTimeout(() => {
          onHidden()
          return () => {
              setView(true);
          }
      }, 2000);
  }, [hidden],[view])
  
  {
      view == false ? null : <div className="alert alert-caution">경고: 숫자만입력하세요</div>
  }
  ```

  - css

    ```css
    .alert{
     font-size : 2em;
     color: white;
    }
    .alert-warnig{
    background: yellow;
    }
    .alert-caution{
    background: red;
    }
    ```

    ![image-20221219210431540](../../assets/img/post/2022-12-16-Part-2--쇼핑몰-프로젝트-2/image-20221219210431540.png)